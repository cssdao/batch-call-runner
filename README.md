# Batch Call Runner

<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?logo=typescript&logoColor=white)
![Node.js](https://img.shields.io/badge/Node.js-43853D?logo=node.js&logoColor=white)
![Ethers.js](https://img.shields.io/badge/Ethers.js-3C3C3D?logo=ethereum&logoColor=white)
![License](https://img.shields.io/badge/License-ISC-blue.svg)

**æ™ºèƒ½åˆçº¦æ‰¹é‡è°ƒç”¨å·¥å…·** - æ”¯æŒå¤šé“¾ã€å¤šé’±åŒ…ã€å¹¶å‘æ‰§è¡Œçš„é«˜æ•ˆæ‰¹é‡äº¤æ˜“å·¥å…·

</div>

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸŒ **å¤šé“¾æ”¯æŒ** - æ”¯æŒ Ethereumã€Baseã€Polygonã€BSCã€Arbitrum ç­‰ä¸»æµç½‘ç»œ
- ğŸš€ **å¹¶å‘æ‰§è¡Œ** - æ”¯æŒ 1-10 ä¸ªå¹¶å‘ï¼Œå¤§å¹…æå‡æ‰¹é‡æ“ä½œæ•ˆç‡
- ğŸ”‘ **æ™ºèƒ½åœ°å€å¡«å……** - è‡ªåŠ¨è¯†åˆ«å¹¶å¡«å……åˆçº¦å‡½æ•°ä¸­çš„ address å‚æ•°
- ğŸ“‹ **ABI é©±åŠ¨** - é€šè¿‡ ABI.json è‡ªåŠ¨è§£æåˆçº¦å‡½æ•°ï¼Œæ— éœ€æ‰‹åŠ¨æ„é€ äº¤æ˜“æ•°æ®
- ğŸ‘› **å¤šé’±åŒ…ç®¡ç†** - ä» wallets.txt æ‰¹é‡è¯»å–ç§é’¥ï¼Œæ”¯æŒå¤§è§„æ¨¡æ“ä½œ
- ğŸ’¾ **ç»“æœæŒä¹…åŒ–** - è‡ªåŠ¨ä¿å­˜æ‰§è¡Œç»“æœåˆ°å¸¦æ—¶é—´æˆ³çš„ JSON æ–‡ä»¶
- ğŸ›¡ï¸ **å®‰å…¨éªŒè¯** - å®Œæ•´çš„ä½™é¢æ£€æŸ¥ã€Gas ä¼°ç®—ã€ç§é’¥æ ¼å¼éªŒè¯
- ğŸ¯ **å®æ—¶ç›‘æ§** - è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—ï¼ŒåŒ…å«äº¤æ˜“å“ˆå¸Œã€Gas ä½¿ç”¨é‡ã€åŒºå—å·ç­‰

## ğŸŒ æ”¯æŒçš„ç½‘ç»œ

| ç½‘ç»œ | Chain ID | RPC ç«¯ç‚¹ | æµè§ˆå™¨ |
|------|----------|----------|--------|
| Ethereum Mainnet | 1 | publicnode.com | etherscan.io |
| Base Mainnet | 8453 | mainnet.base.org | basescan.org |
| Monad Mainnet | 143 | rpc.monad.xyz | monadvision.com |
| Polygon Mainnet | 137 | polygon-rpc.com | polygonscan.com |
| BSC Mainnet | 56 | bsc-dataseed1.binance.org | bscscan.com |
| Arbitrum Mainnet | 42161 | arb1.arbitrum.io/rpc | arbiscan.io |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16.0.0
- npm æˆ– yarn
- åŸºæœ¬çš„æ™ºèƒ½åˆçº¦äº¤äº’çŸ¥è¯†

### 1. å®‰è£…é¡¹ç›®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/cssdao/batch-call-runner.git
cd batch-call-runner

# å®‰è£…ä¾èµ–
npm install
```

### 2. é…ç½®é’±åŒ…

åˆ›å»º `wallets.txt` æ–‡ä»¶ï¼š

```bash
# ç¤ºä¾‹ wallets.txt
0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890
5678901234567890567890123456789056789012345678905678901234567890
```

**ç§é’¥æ ¼å¼è¦æ±‚ï¼š**
- å¿…é¡»æ˜¯64ä½åå…­è¿›åˆ¶å­—ç¬¦
- æ”¯æŒæœ‰æ—  `0x` å‰ç¼€
- æ¯è¡Œä¸€ä¸ªç§é’¥
- ç©ºè¡Œè‡ªåŠ¨è¿‡æ»¤

### 3. é…ç½®åˆçº¦ ABI

ç¡®ä¿ `ABI.json` æ–‡ä»¶å­˜åœ¨ï¼ŒåŒ…å«ç›®æ ‡åˆçº¦çš„ ABI å®šä¹‰ï¼š

```json
[
  {
    "name": "pledge",
    "inputs": [],
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "name": "has_pledged",
    "inputs": [{"name": "who", "type": "address"}],
    "outputs": [{"name": "", "type": "bool"}],
    "stateMutability": "view",
    "type": "function"
  }
]
```

### 4. è¿è¡Œå·¥å…·

```bash
# å¯åŠ¨ä¸»ç¨‹åº
npm start

# ç”Ÿæˆåœ°å€åˆ—è¡¨
npm run address

# ç”Ÿæˆåœ°å€åˆ—è¡¨ï¼ˆåŒ…å«ä½™é¢ï¼‰
npm run address-balance
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ä¸»è¦å·¥ä½œæµç¨‹

1. **é€‰æ‹©ç½‘ç»œ** - ä»æ”¯æŒçš„ç½‘ç»œåˆ—è¡¨ä¸­é€‰æ‹©ç›®æ ‡é“¾
2. **è¾“å…¥åˆçº¦åœ°å€** - æä¾›ç›®æ ‡æ™ºèƒ½åˆçº¦åœ°å€
3. **è®¾ç½®å¹¶å‘æ•°** - é€‰æ‹© 1-10 ä¸ªå¹¶å‘æ‰§è¡Œçº¿ç¨‹
4. **é€‰æ‹©å‡½æ•°** - ä» ABI è‡ªåŠ¨è§£æå¯ç”¨å‡½æ•°åˆ—è¡¨
5. **å¡«å†™å‚æ•°** - æ ¹æ®å‡½æ•°å®šä¹‰è¾“å…¥ç›¸åº”å‚æ•°
6. **æ‰¹é‡æ‰§è¡Œ** - å·¥å…·è‡ªåŠ¨å¤„ç†æ‰€æœ‰é’±åŒ…å¹¶å‘é€äº¤æ˜“
7. **æŸ¥çœ‹ç»“æœ** - æ§åˆ¶å°æ˜¾ç¤ºæ‰§è¡Œè¿›åº¦å’Œç»“æœ

### æ™ºèƒ½åœ°å€å¡«å……æœºåˆ¶

å·¥å…·ä¼šè‡ªåŠ¨è¯†åˆ«åˆçº¦å‡½æ•°ä¸­çš„ `address` å’Œ `address[]` ç±»å‹å‚æ•°ï¼š

```solidity
// åˆçº¦å‡½æ•°ç¤ºä¾‹
function pledge(address user, uint256 amount) public;
function batchTransfer(address[] recipients, uint256 amount) public;
```

- `address` ç±»å‹ï¼šè‡ªåŠ¨å¡«å……å½“å‰é’±åŒ…åœ°å€
- `address[]` ç±»å‹ï¼šè‡ªåŠ¨å¡«å……åŒ…å«å½“å‰é’±åŒ…åœ°å€çš„æ•°ç»„
- å…¶ä»–ç±»å‹ï¼šé€šè¿‡äº¤äº’å¼ç•Œé¢è¾“å…¥

### åœ°å€ç”Ÿæˆå·¥å…·

```bash
# åŸºç¡€åœ°å€ç”Ÿæˆ
npm run address

# åŒ…å«ä½™é¢æŸ¥è¯¢çš„åœ°å€ç”Ÿæˆ
npm run address-balance
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
0x822b52eCD838C1072cb7Fa14Ded7e407f0A99b8e
0xC73cE72b70566Ef7Ff940542AF6cc8e453bdfC70
0xbd0cF90D06237cd28072AAFdFeDCE647527F4E10
```

æˆ–å¸¦ä½™é¢æ ¼å¼ï¼š
```
0x822b52eCD838C1072cb7Fa14Ded7e407f0A99b8e-1.234567
0xC73cE72b70566Ef7Ff940542AF6cc8e453bdfC70-0.987654
```

## ğŸ“Š è¾“å‡ºæ ¼å¼

æ‰§è¡Œç»“æœè‡ªåŠ¨ä¿å­˜ä¸º `results-{timestamp}.json`ï¼š

```json
{
  "timestamp": "2025-11-14T09:59:40.452Z",
  "chain": "Ethereum Mainnet",
  "results": [
    {
      "hash": "0xe158c53e902e33caa6bc4fef832336b6035e13ad2fedfeae7930092207865776",
      "success": true,
      "actualGasUsed": "49839",
      "address": "0x822b52eCD838C1072cb7Fa14Ded7e407f0A99b8e"
    },
    {
      "success": false,
      "error": "Insufficient balance. Need 0.001 more ETH for gas fees",
      "address": "0x75864aA990C6292B39E68080De4B81c633568Ab1"
    }
  ]
}
```

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### ä½™é¢éªŒè¯
- è‡ªåŠ¨æ£€æŸ¥æ¯ä¸ªé’±åŒ…çš„ ETH ä½™é¢
- é¢„ä¼° Gas è´¹ç”¨ï¼ˆåŒ…å« 20% ç¼“å†²ï¼‰
- ä½™é¢ä¸è¶³æ—¶è·³è¿‡æ‰§è¡Œå¹¶è®°å½•é”™è¯¯

### Gas ä¼˜åŒ–
- è‡ªåŠ¨ Gas ä»·æ ¼ä¼°ç®—
- æ™ºèƒ½Gasé™åˆ¶è®¾ç½®ï¼ˆé¢„ä¼° + 20% ç¼“å†²ï¼‰
- å¤±è´¥é‡è¯•æœºåˆ¶

### ç§é’¥ä¿æŠ¤
- æœ¬åœ°æ–‡ä»¶è¯»å–ï¼Œä¸ä¸Šä¼ äº‘ç«¯
- ä¸¥æ ¼çš„ç§é’¥æ ¼å¼éªŒè¯
- å†…å­˜ä¸­å®‰å…¨å¤„ç†

## âš™ï¸ é…ç½®é€‰é¡¹

### ç½‘ç»œé…ç½®
ç½‘ç»œé…ç½®å­˜å‚¨åœ¨ `src/config.ts` ä¸­ï¼Œæ”¯æŒè‡ªå®šä¹‰ï¼š
- RPC ç«¯ç‚¹
- Chain ID
- åŒºå—é“¾æµè§ˆå™¨ URL

### å¹¶å‘æ§åˆ¶
- æ”¯æŒ 1-10 ä¸ªå¹¶å‘çº¿ç¨‹
- è‡ªåŠ¨èŠ‚æµï¼ˆ500ms å»¶è¿Ÿï¼‰
- é˜²æ­¢ RPC é™åˆ¶

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
batch-call-runner/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts          # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ cli.ts           # å‘½ä»¤è¡Œäº¤äº’ç•Œé¢
â”‚   â”œâ”€â”€ config.ts        # ç½‘ç»œé…ç½®
â”‚   â”œâ”€â”€ wallet.ts        # é’±åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ transaction.ts   # äº¤æ˜“æ‰§è¡Œ
â”‚   â”œâ”€â”€ abi.ts           # ABI å¤„ç†
â”‚   â”œâ”€â”€ addresses.ts     # åœ°å€ç”Ÿæˆå·¥å…·
â”‚   â””â”€â”€ types.ts         # ç±»å‹å®šä¹‰
â”œâ”€â”€ ABI.json             # åˆçº¦ ABI å®šä¹‰
â”œâ”€â”€ wallets.txt          # ç§é’¥åˆ—è¡¨
â””â”€â”€ package.json         # é¡¹ç›®é…ç½®
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **ethers.js v6** - ä»¥å¤ªåŠäº¤äº’åº“
- **inquirer** - äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢
- **TypeScript** - ç±»å‹å®‰å…¨çš„å¼€å‘ä½“éªŒ
- **ts-node** - ç›´æ¥è¿è¡Œ TypeScript ä»£ç 

### æ‰§è¡Œæµç¨‹å›¾
```
å¯åŠ¨ç¨‹åº â†’ é€‰æ‹©ç½‘ç»œ â†’ è¾“å…¥åˆçº¦åœ°å€ â†’ é€‰æ‹©å¹¶å‘æ•°
    â†“
è§£æ ABI â†’ é€‰æ‹©å‡½æ•° â†’ è¾“å…¥å‚æ•° â†’ éªŒè¯ç§é’¥
    â†“
å¹¶å‘æ‰§è¡Œ â†’ å®æ—¶ç›‘æ§ â†’ ç»“æœä¿å­˜ â†’ å®ŒæˆæŠ¥å‘Š
```

## âš ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

### ğŸš¨ é‡è¦æé†’

1. **æµ‹è¯•å…ˆè¡Œ**
   - âœ… å¿…é¡»å…ˆåœ¨æµ‹è¯•ç½‘å……åˆ†æµ‹è¯•
   - âœ… éªŒè¯åˆçº¦åœ°å€å’Œ ABI çš„æ­£ç¡®æ€§
   - âœ… ç¡®è®¤äº¤æ˜“é€»è¾‘ç¬¦åˆé¢„æœŸ

2. **èµ„é‡‘å®‰å…¨**
   - ğŸ’° ä½¿ç”¨ä¸“é—¨çš„æ‰¹å¤„ç†é’±åŒ…ï¼Œé¿å…ä½¿ç”¨ä¸»é’±åŒ…
   - ğŸ’° ç¡®ä¿æ¯ä¸ªé’±åŒ…æœ‰è¶³å¤Ÿçš„ ETH ä½™é¢
   - ğŸ’° äº†è§£ç›®æ ‡åˆçº¦çš„åŠŸèƒ½å’Œé£é™©
   - ğŸ’° å»ºè®®ä»å°‘é‡é’±åŒ…å¼€å§‹æµ‹è¯•

3. **ç§é’¥ä¿æŠ¤**
   - ğŸ”’ `wallets.txt` åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œå¦¥å–„ä¿ç®¡
   - ğŸ”’ ä¸è¦æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
   - ğŸ”’ ä½¿ç”¨ååŠæ—¶åˆ é™¤æˆ–ç§»åŠ¨åˆ°å®‰å…¨ä½ç½®
   - ğŸ”’ å®šæœŸè½®æ¢æ‰¹å¤„ç†é’±åŒ…

4. **ç½‘ç»œé£é™©**
   - ğŸŒ æ³¨æ„ RPC ç¨³å®šæ€§å’Œé™åˆ¶
   - ğŸŒ ç›‘æ§ç½‘ç»œæ‹¥å µæƒ…å†µ
   - ğŸŒ è€ƒè™‘ä½¿ç”¨ç§æœ‰ RPC ç«¯ç‚¹

## ğŸ“‹ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

<details>
<summary><strong>Q: ç§é’¥æ ¼å¼é”™è¯¯</strong></summary>

A: ç¡®ä¿ç§é’¥ä¸º64ä½åå…­è¿›åˆ¶å­—ç¬¦ï¼Œæ”¯æŒæœ‰æ—  0x å‰ç¼€ï¼š
```
âœ… æ­£ç¡®: 0x1234567890abcdef...
âœ… æ­£ç¡®: 1234567890abcdef...
âŒ é”™è¯¯: 0x123 (é•¿åº¦ä¸è¶³)
```
</details>

<details>
<summary><strong>Q: ä½™é¢ä¸è¶³é”™è¯¯</strong></summary>

A: æ£€æŸ¥é’±åŒ…ä½™é¢æ˜¯å¦è¶³å¤Ÿæ”¯ä»˜ Gas è´¹ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ `npm run address-balance` æŸ¥è¯¢æ‰€æœ‰é’±åŒ…ä½™é¢ã€‚
</details>

<details>
<summary><strong>Q: åˆçº¦å‡½æ•°æœªæ‰¾åˆ°</strong></summary>

A: ç¡®ä¿ ABI.json æ–‡ä»¶åŒ…å«ç›®æ ‡åˆçº¦çš„å®Œæ•´ ABIï¼Œä¸”å‡½æ•°åç§°å®Œå…¨åŒ¹é…ã€‚
</details>

<details>
<summary><strong>Q: å¹¶å‘æ‰§è¡Œå¤±è´¥</strong></summary>

A: é™ä½å¹¶å‘æ•°ï¼Œæˆ–æ£€æŸ¥ RPC ç«¯ç‚¹çš„ç¨³å®šæ€§ã€‚å»ºè®®ä»å¹¶å‘æ•° 1 å¼€å§‹æµ‹è¯•ã€‚
</details>

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0
- âœ¨ æ”¯æŒå¤šé“¾æ‰¹é‡äº¤æ˜“
- âœ¨ æ™ºèƒ½åœ°å€å¡«å……æœºåˆ¶
- âœ¨ å¹¶å‘æ‰§è¡Œæ§åˆ¶
- âœ¨ å®æ—¶ä½™é¢æ£€æŸ¥
- âœ¨ ç»“æœæŒä¹…åŒ–å­˜å‚¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [ISC è®¸å¯è¯](LICENSE)ã€‚

## âš ï¸ å…è´£å£°æ˜

<div align="center" style="background-color: #fff3cd; padding: 15px; border-radius: 5px; margin: 20px 0;">

**é‡è¦å£°æ˜**

æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ å’Œå¼€å‘ä½¿ç”¨ã€‚ä½¿ç”¨è€…éœ€è¦ï¼š

- ğŸ”„ è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨é£é™©
- ğŸ’° è´Ÿè´£èµ„é‡‘å®‰å…¨ç®¡ç†
- ğŸ” äº†è§£æ™ºèƒ½åˆçº¦äº¤äº’åæœ
- âš–ï¸ éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„

å¼€å‘è€…ä¸å¯¹å› ä½¿ç”¨æœ¬å·¥å…·é€ æˆçš„ä»»ä½•æŸå¤±æ‰¿æ‹…è´£ä»»ã€‚

</div>

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™ä¸€ä¸ª â­**

Made with â¤ï¸ by [CSS DAO](https://github.com/cssdao)

</div>
